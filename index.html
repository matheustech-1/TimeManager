<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Login - TaskTimePro</title>
  <link rel="stylesheet" href="style.css">
  <body><style>
  * {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 25%, #90caf9 50%, #64b5f6 75%, #1976d2 100%);
  background-size: 400% 400%;
  animation: gradientShift 15s ease infinite;
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Segoe UI', 'Trebuchet MS', Arial, sans-serif;
  overflow: hidden;
}

@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.02); }
}

@keyframes glow {
  0%, 100% {
    box-shadow: 0 0 20px rgba(25,118,210,0.18), 0 0 40px rgba(25,118,210,0.08);
  }
  50% {
    box-shadow: 0 0 40px rgba(25,118,210,0.28), 0 0 60px rgba(25,118,210,0.12);
  }
}

.login-container {
  background: rgba(255,255,255,0.98);
  backdrop-filter: blur(10px);
  padding: 3rem 2.5rem;
  border-radius: 20px;
  box-shadow: 0 20px 60px rgba(25,118,210,0.10), 0 0 50px rgba(25,118,210,0.08);
  display: flex;
  flex-direction: column;
  align-items: center;
  min-width: 380px;
  border: 2px solid transparent;
  background-image:
    linear-gradient(rgba(255,255,255,0.98), rgba(255,255,255,0.98)),
    linear-gradient(90deg,#1976d2,#64b5f6,#e3f2fd,#1976d2);
  background-origin: border-box;
  background-clip: padding-box, border-box;
  animation: slideUp .6s ease;
  position: relative;
  overflow: hidden;
}

.login-container::before {
  content: '';
  position: absolute;
  top: -50%;
  right: -50%;
  width: 300px;
  height: 300px;
  background: radial-gradient(circle, rgba(25,118,210,0.08), transparent);
  animation: pulse 4s ease infinite;
}

.login-container h2 {
  background: linear-gradient(90deg,#1976d2,#64b5f6,#e3f2fd);
  -webkit-background-clip: text;
          background-clip: text;
          color: transparent;
          -webkit-text-fill-color: transparent;
          margin-bottom:2rem;
          font-size:1.8rem;
          font-weight:800;
          letter-spacing:.5px;
          position:relative;
          z-index:1;
}

.login-container input {
    width:100%;
    padding:1rem 1.2rem;
    margin-bottom:1.2rem;
    border:2px solid #bbdefb;
    border-radius:12px;
    font-size:1rem;
    background:linear-gradient(135deg,#fff,#e3f2fd);
    color:#222;
    transition:.3s;
    position:relative;z-index:1
}
.login-container input::placeholder{color:#90a4ae;}
.login-container input:focus{
    border-color:#1976d2;
    box-shadow:0 0 20px #bbdefb,inset 0 0 10px #e3f2fd;outline:none;transform:translateY(-2px)
}
.login-container button{
    width:100%;
    padding:1rem 1.5rem;
    background:linear-gradient(90deg,#1976d2,#64b5f6);
    color:#fff;border:none;border-radius:12px;font-size:1.1rem;font-weight:700;cursor:pointer;transition:.3s;position:relative;z-index:1;box-shadow:0 8px 25px #bbdefb
}
.login-container button:hover{
    transform:translateY(-3px);
    box-shadow:0 12px 35px #90caf9,0 0 20px #1976d2
}
.login-container button:active{transform:translateY(-1px);}
.error-message{
    color:#1976d2;margin-bottom:1.2rem;font-size:.95rem;font-weight:600;min-height:20px;animation:slideUp .4s ease;position:relative;z-index:1
}
#toggleText,#toggleMode{position:relative;z-index:1}
#toggleMode{
    color:#1976d2;text-decoration:none;font-weight:700;cursor:pointer;transition:.3s
}
#toggleMode:hover{
    color:#64b5f6;text-shadow:0 0 10px #bbdefb
}
div[style*="margin-top"]{position:relative;z-index:1}
/* Responsivo */
@media (max-width:480px){
    .login-container{min-width:90%;padding:2rem 1.5rem;}
    .login-container h2{font-size:1.5rem;}
    .login-container input,.login-container button{padding:.9rem 1rem;}
}
</style>
    
<body>
  <form id="loginForm" class="login-container">
  <h2 id="formTitle">Entrar no TaskTimePro</h2>
  <div class="error-message" id="error"></div>
  <input type="email" id="username" placeholder="Usuário (e-mail)" required>
  <input type="password" id="password" placeholder="Senha" required>
  <input type="password" id="confirmPassword" placeholder="Confirmar senha" style="display:none;" />
  <button type="submit" id="actionButton">Entrar</button>
  <div style="margin-top:1rem; font-size:0.9rem; color:#3b3b3b; text-align:center; width:100%; position:relative; z-index:1;">
    <div style="margin-bottom:0.5rem;">
      <span id="toggleText">Ainda não tem conta? </span><a href="#" id="toggleMode">Criar conta</a>
    </div>
    <a href="#" id="toggleRecover" style="color:#1E90FF; text-decoration:none; font-size:0.85rem;">Esqueceu a senha?</a>
  </div>
</form>
</body></style>
    

  <!-- Firebase SDK (v8 compatível). Substitua as chaves em firebaseConfig pelas suas reais -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script>
    // Configuração do projeto Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyANJj_abc5m_rxtL12VFU_5Uf5fGHsixvg",
      authDomain: "taskmanager-f1418.firebaseapp.com",
      projectId: "taskmanager-f1418",
      storageBucket: "taskmanager-f1418.firebasestorage.app",
      messagingSenderId: "804838980628",
      appId: "1:804838980628:web:d81f76c7f0352338d6bb01"
    };

    // Inicializa o Firebase se o SDK estiver disponível
    if (typeof firebase !== 'undefined' && firebase.initializeApp) {
      try {
        firebase.initializeApp(firebaseConfig);
      } catch (err) {
        // ignora se já inicializado
      }
    }

    // Verificar se já está logado (ao carregar a página)
    window.addEventListener('load', function() {
      if (localStorage.getItem('loggedIn') === 'true') {
        window.location.href = 'home.html';
        return;
      }

    });

    // Gerencia modo: 'login' ou 'register'
    let mode = 'login';
    const toggleModeEl = document.getElementById('toggleMode');
    const toggleRecoverEl = document.getElementById('toggleRecover');
    const confirmPassEl = document.getElementById('confirmPassword');
    const formTitle = document.getElementById('formTitle');
    const actionButton = document.getElementById('actionButton');

    toggleModeEl.addEventListener('click', function(e) {
      e.preventDefault();
      if (mode === 'login') {
        mode = 'register';
        confirmPassEl.style.display = 'block';
        formTitle.textContent = 'Criar conta no TaskTimePro';
        actionButton.textContent = 'Criar conta';
        toggleModeEl.textContent = 'Já tenho conta';
        document.getElementById('toggleText').textContent = '';
      } else {
        mode = 'login';
        confirmPassEl.style.display = 'none';
        formTitle.textContent = 'Entrar no TaskTimePro';
        actionButton.textContent = 'Entrar';
        toggleModeEl.textContent = 'Criar conta';
        document.getElementById('toggleText').textContent = 'Ainda não tem conta? ';
      }
    });

    // Modal de recuperação de senha
    toggleRecoverEl.addEventListener('click', function(e) {
      e.preventDefault();
      const email = prompt('Digite seu e-mail para recuperar a senha:');
      if (!email) return;

      const errorEl = document.getElementById('error');
      errorEl.textContent = '';

      // Com Firebase
      if (typeof firebase !== 'undefined' && firebase.auth) {
        firebase.auth().sendPasswordResetEmail(email)
          .then(() => {
            errorEl.style.color = '#4caf50';
            errorEl.textContent = '✓ Link de recuperação enviado! Verifique seu e-mail.';
            setTimeout(() => {
              errorEl.style.color = '#FF1493';
              errorEl.textContent = '';
            }, 4000);
          })
          .catch((error) => {
            console.log(error);
            errorEl.textContent = error.message || 'Erro ao enviar e-mail de recuperação.';
          });
      } else {
        // Fallback sem Firebase
        errorEl.style.color = '#4caf50';
        errorEl.textContent = '✓ Se o e-mail existir, um link de recuperação será enviado.';
        setTimeout(() => {
          errorEl.style.color = '#FF1493';
          errorEl.textContent = '';
        }, 3000);
      }
    });

    document.getElementById('loginForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const user = document.getElementById('username').value.trim();
      const pass = document.getElementById('password').value.trim();
      const confirm = document.getElementById('confirmPassword').value.trim();
      const errorEl = document.getElementById('error');
      errorEl.textContent = '';

      if (!user || !pass) {
        errorEl.textContent = 'Preencha usuário e senha.';
        return;
      }

      if (mode === 'register') {
        if (pass.length < 6) {
          errorEl.textContent = 'Senha deve ter pelo menos 6 caracteres.';
          return;
        }
        if (pass !== confirm) {
          errorEl.textContent = 'As senhas não conferem.';
          return;
        }

        // Registrar com Firebase se disponível
        if (typeof firebase !== 'undefined' && firebase.auth) {
          firebase.auth().createUserWithEmailAndPassword(user, pass)
            .then((userCredential) => {
              localStorage.setItem('loggedIn', 'true');
              localStorage.setItem('userEmail', userCredential.user.email);
              setTimeout(() => {
                window.location.href = 'home.html';
              }, 100);
            })
            .catch((error) => {
              console.log(error);
              errorEl.textContent = error.message || 'Erro ao criar conta.';
            });
          return;
        }

        // Fallback: salva flag local e redireciona
        localStorage.setItem('loggedIn', 'true');
        localStorage.setItem('userEmail', user);
        setTimeout(() => {
          window.location.href = 'home.html';
        }, 100);
        return;
      }

      // Modo login
      if (typeof firebase !== 'undefined' && firebase.auth) {
        firebase.auth().signInWithEmailAndPassword(user, pass)
          .then((userCredential) => {
            localStorage.setItem('loggedIn', 'true');
            localStorage.setItem('userEmail', userCredential.user.email);
            setTimeout(() => {
              window.location.href = 'home.html';
            }, 100);
          })
          .catch((error) => {
            console.log(error);
            errorEl.textContent = 'Usuário ou senha inválidos!';
          });
        return;
      }

      // Fallback de login simples
      if (localStorage.getItem('userEmail') === user || !localStorage.getItem('userEmail')) {
        localStorage.setItem('loggedIn', 'true');
        localStorage.setItem('userEmail', user);
        setTimeout(() => {
          window.location.href = 'home.html';
        }, 100);
      } else {
        errorEl.textContent = 'Usuário não encontrado (fallback).';
      }
    });
  </script>
</body>
</html>